@model List<OrderFood_SW.ViewModels.OrderHistoryViewModel>
@{
    Layout = "_CustomerLayout";
}

<link rel="stylesheet" href="~/css/customer-style/customer-history.css" asp-append-version="true">

<div class="main-content" style="padding-top:5px">
    <!-- Filter Section -->
    @* <div class="filter-section">
        <div class="filter-row">
            <div class="filter-group">
                <label for="status-filter">Trạng thái</label>
                <select id="status-filter" class="filter-select">
                    <option value="">Tất cả trạng thái</option>
                    <option value="completed">Hoàn thành</option>
                    <option value="processing">Đang xử lý</option>
                    <option value="delivered">Đã giao</option>
                    <option value="cancelled">Đã hủy</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="date-from">Từ ngày</label>
                <input type="date" id="date-from" class="filter-input">
            </div>

            <div class="filter-group">
                <label for="date-to">Đến ngày</label>
                <input type="date" id="date-to" class="filter-input">
            </div>

            <div class="filter-group">
                <label for="search-order">Tìm kiếm đơn hàng</label>
                <input type="text" id="search-order" class="filter-input" placeholder="Nhập mã đơn hàng...">
            </div>
        </div>
        <button class="filter-btn">Lọc kết quả</button>
    </div> *@

    <!-- Orders Container -->
    <div class="orders-container">
        @foreach (var item in Model)
        {
            <div class="order-card">
                <div class="order-header">
                    <div class="order-info">
                        <div class="order-id">#@item.OrderId</div>
                        <div class="order-date">@item.OrderTime</div>
                    </div>
                    <div class="order-status">
                        @if (item.OrderStatus.Equals("1"))
                        {
                            <span class="status-badge status-processing">Pending...</span>
                        }
                        else if (item.OrderStatus.Equals("2"))
                        {
                            <span class="status-badge status-delivered">Approved</span>
                        }
                        else if (item.OrderStatus.Equals("-1"))
                        {
                            <span class="status-badge status-cancelled">Cancelled</span>
                        }
                        <div class="order-total">@item.TotalAmount</div>
                    </div>
                </div>
                <div class="order-body">
                    <div class="order-items">
                        @foreach (var detail in item.OrderDetails)
                        {
                            <div class="order-item">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect width='60' height='60' fill='%23FF9800'/%3E%3Ctext x='30' y='32' text-anchor='middle' fill='white' font-family='Arial' font-size='10'%3EPizza%3C/text%3E%3Ctext x='30' y='44' text-anchor='middle' fill='white' font-family='Arial' font-size='10'%3EHải sản%3C/text%3E%3C/svg%3E" alt="Pizza hải sản" class="item-image">
                                <div class="item-details">
                                    <div class="item-name">@detail.DishName</div>
                                    @* <div class="item-description">@detail.</div> *@
                                </div>
                                <div class="item-price-qty">
                                    <span class="item-quantity">@detail.Quantity</span>
                                    <span class="item-price">@detail.UnitPrice</span>
                                </div>
                            </div>
                        }
                    </div>
                    @if (item.OrderStatus.Equals("2"))
                    {
                        <div class="order-actions">
                            <button class="action-btn btn-secondary">Xem chi tiết</button>
                            <button class="action-btn btn-primary">Đặt lại</button>
                        </div>
                    }
                    else if (item.OrderStatus.Equals("1"))
                    {
                        <div class="order-actions">
                            <form method="post" asp-action="CustomerCancelOrder" asp-controller="Customer">
                                <input type="hidden" name="orderId" value="@item.OrderId" />
                                <button type="submit" class="action-btn btn-secondary">Cancel</button>
                            </form>
                            <button class="action-btn btn-primary">Theo dõi</button>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
</div>