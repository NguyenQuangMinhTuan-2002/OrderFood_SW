@model List<OrderFood_SW.ViewModels.OrderHistoryViewModel>
@{
    Layout = "_CustomerLayout";
    var tableId = Context.Session.GetString("TableId");
}

<link rel="stylesheet" href="~/css/customer-style/customer-history.css" asp-append-version="true">

<div class="main-content" style="padding-top:5px">
    @if (Model == null || Model.Count == 0)
    {
        <div class="empty-state">
            <div class="empty-icon">
                <i class="fas fa-shopping-cart"></i>
            </div>
            <h2 class="empty-title">You don't have any order in process'/h2>
            <p class="empty-description" style="margin-bottom: 20px">You haven't placed any orders yet. Start exploring our menu!</p>
            <a href="/CustomerOrder/CreateOrder" class="#">
                <i class="fas fa-plus"></i> Add Items
            </a>
        </div>
    }
    else
    {
    <!-- Orders Container -->
    <div class="orders-container">
        @foreach (var item in Model)
        {
            <div class="order-card">
                <div class="order-header">
                    <div class="order-info">
                        <div class="order-id">#@item.OrderId</div>
                        <div class="order-date">@item.OrderTime</div>
                    </div>
                    <div class="order-status">
                        <span class="status-badge status-processing">Pending...</span>
                        <div class="order-total">@item.TotalAmount</div>
                    </div>
                </div>
                <div class="order-body">
                    <div class="order-items">
                        @foreach (var detail in item.OrderDetails)
                        {
                            <div class="order-item">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect width='60' height='60' fill='%23FF9800'/%3E%3Ctext x='30' y='32' text-anchor='middle' fill='white' font-family='Arial' font-size='10'%3EPizza%3C/text%3E%3Ctext x='30' y='44' text-anchor='middle' fill='white' font-family='Arial' font-size='10'%3EHải sản%3C/text%3E%3C/svg%3E" alt="Pizza hải sản" class="item-image">
                                <div class="item-details">
                                    <div class="item-name">@detail.DishName</div>
                                    @* <div class="item-description">@detail.</div> *@
                                </div>
                                <div class="item-price-qty">
                                    <span class="item-quantity">@detail.Quantity</span>
                                    <span class="item-price">@detail.UnitPrice</span>
                                </div>
                            </div>
                        }
                    </div>
                    @if (item.OrderStatus.Equals("2"))
                    {
                        <div class="order-actions">
                            <a asp-action="OrderDetails" asp-controller="Customer" asp-route-orderId="@item.OrderId" class="action-btn btn-secondary">
                                See more details
                            </a>
                            <form method="post" asp-action="ReOrder" asp-controller="Customer">
                                <input type="hidden" name="orderId" value="@item.OrderId" />
                                <input type="hidden" name="tableId" value="@tableId" />
                                <button class="action-btn btn-primary">Re-Order</button>
                            </form>
                        </div>
                    }
                    else if (item.OrderStatus.Equals("1"))
                    {
                        <div class="order-actions">
                            <a asp-action="OrderDetails" asp-controller="Customer" asp-route-orderId="@item.OrderId" class="action-btn btn-secondary">
                                See more details
                            </a>
                            <form method="post" asp-action="CancelOrder" asp-controller="Customer">
                                <input type="hidden" name="orderId" value="@item.OrderId" />
                                <button type="submit" class="action-btn btn-secondary">Cancel</button>
                            </form>
                        </div>
                    }
                    else if (item.OrderStatus.Equals("-1"))
                    {
                        <div class="order-actions">
                            <a asp-action="OrderDetails" asp-controller="Customer" asp-route-orderId="@item.OrderId" class="action-btn btn-secondary">
                                See more details
                            </a>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
    }
</div>